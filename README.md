# travel_social_network_system_design

Домашнее задание по курсу System Design
System Design социальной сети для курса по System Design(https://balun.courses/courses/system_design)

## Функциональные требования:

- Публикация постов из путешествий с фотографиями, небольшим описанием;
- Привязка постов к конкретному месту путешествия;
- Оценка постов других путешественников;
- Возможность оставлять комментарии к постам;
- Подписка на других путешественников;
- Лента постов, состоящая из подписок;
- Поиск популярных мест для путешествий;
- Просмотр постов привязанных к выбранному месту;
- Просмотр ленты других путешественников;

## Нефункциональные требования:

- DAU 10_000_000
- Регион СНГ
- Доступность 99,95%
- Реализация веб и мобильных приложений
- Сжатие фотографий
- Сезонность:
    - С апреля по октябрь и январь более высокая активность
- Данные храним всегда
- Ограничиваем до 2 постов в день
- Временные ограничения:
    - Открытие ленты подписок, ленты места ≤ 1с
    - Публикация поста ≤ 5с
    - Открытие результатов поиска ≤ 3с
- Поведение пользователя:
    - Публикация постов - 1 в месяц
    - Просмотр постов ленте - 50 в день
    - Комментарии к постам - 1 в день
    - Оценка постов - 4 в день
    - Просмотр полного поста - 5 в день
    - Поиск постов - 1 в неделю (10 постов в выдаче в среднем)
    - Просмотр ленты путешественников - 1 в неделю (10 постов в выдаче)

## Объем данных для сущностей:

**Пост** (2mb):

- text - 1000b
- media - 2mb (4 photo avg)
- other data - 200b

**Пост в ленте** (500kb):

- text - 200b
- media - 500Kb

**Комментарий** (200b):

- text 100b
- user_id 16b
- post_id 16b
- id 16b
- date 16b
- parent_id 16b

**Оценка** (100b):

- user_id 16b
- post_id 16b
- id 16b
- date 16b
- reaction 4b

## Расчет нагрузки и трафика

### Write
- Комментарии
    - RPS = 10_000_000 / 86400 = 120
    - Traffic = 120 * 200 byte = 24 kb / s
- Публикация постов
    - RPS = 10_000_000 / 30 / 86400 = 4
    - Traffic = 4 * 2mb = 8 mb / s
- Оценки (write)
    - RPS = 10_000_000 * 4 / 86400 = 480
    - Traffic = 480 * 100 byte = 48 kb / s

### Read
- Просмотр постов в ленте (с учетом поиск и ленты пользователей)
    - RPS = 10_000_000 * 53 / 86400 = 6150
    - Traffic = 5800 * 0.5mb = 3.1 gb / s
- Просмотр поста
    - RPS = 10_000_000 * 6 / 86400 = 580
    - Traffic = 580 * 2mb = 1.2 gb / s

### Расчет памяти и дисков

Replication factor = 3

Посты за год 10_000_000 / 30 * 365 = 121 млн * 1500b = 200 Gb * 3 = 600 Gb 
Комментарии за год 10_000_000 * 365 = 3650 млн = 25 Gb
Оценки за год 10_000_000 * 4 * 365 = 14600 млн = 3 Tb

5 SSD(SATA) по 1 Tb
5_000 iops
2.5 Gb/s


Replication factor 2
Медиа за год 10_000_000 * 4 / 30 * 365 = 490 млн = 250 tb * 2 = 500 Tb 

50 SSD(SATA) по 10 Tb
50_000 iops 
25 Gb/s

